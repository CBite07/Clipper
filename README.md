# Clipper

### **제품 요구사항 명세서 (PRD): Spotlight Downloader**

**1. 개요 (Introduction)**

  * **제품명:** Spotlight Downloader (가칭) 현제는 Clipper
  * **비전:** macOS의 스팟라이트(Spotlight)를 중심으로 한 가장 빠르고 직관적인 유튜브 영상 다운로드 경험을 제공한다. 별도의 앱을 실행하는 과정을 최소화하고, URL 복사 즉시 다운로드로 이어지는 막힘없는 워크플로우를 구축하여 사용자의 생산성을 극대화한다.
  * **핵심 컨셉:** 사용자가 유튜브 URL을 발견했을 때, 브라우저를 떠나거나 앱을 찾아 실행할 필요 없이 스팟라이트 검색창을 통해 모든 다운로드 과정을 시작하고 관리할 수 있는 네이티브 macOS 애플리케이션.

**2. 대상 고객 (Target Audience)**

  * 오프라인 시청, 콘텐츠 제작, 개인 아카이빙 등을 위해 유튜브 영상을 자주 다운로드하는 모든 macOS 사용자.
  * 복잡한 인터페이스나 광고가 많은 웹 기반 다운로더에 불편함을 느끼는 사용자.
  * macOS의 기본 기능을 활용한 빠르고 효율적인 작업 방식을 선호하는 파워 유저.

**3. 문제 정의 및 기회 (Problem Statement & Opportunity)**

  * **문제점:**
      * 기존 다운로더들은 대부분 광고가 많고 사용 과정이 번거롭다.
      * 별도의 앱을 실행하고 URL을 붙여넣고 옵션을 선택하는 과정은 시간을 소모하며 작업의 흐름을 끊는다.
      * 시스템과 유기적으로 통합되어 작동하는 네이티브 macOS 다운로더가 부족하다.
  * **기회:**
      * macOS의 강력한 검색 기능인 스팟라이트는 단순한 파일 검색을 넘어 앱의 특정 기능을 실행하는 허브로 발전하고 있다.
      * `yt-dlp`와 `ffmpeg`는 영상 다운로드 및 변환에 있어 가장 강력하고 검증된 오픈소스 도구이다.
      * 이 두 가지를 Swift 기반의 네이티브 앱으로 통합하면, 기존에 없던 수준의 속도, 안정성, 그리고 사용자 경험을 제공할 수 있다.

**4. 목표 (Goals/Objectives)**

  * **P0 (필수):** 스팟라이트에 유튜브 URL을 붙여넣는 것만으로 다운로드를 시작할 수 있는 핵심 기능 구현.
  * **P1 (중요):** `yt-dlp`와 `ffmpeg`를 앱 내부에 안정적으로 탑재하여 다양한 포맷과 화질의 영상을 다운로드할 수 있도록 지원.
  * **P1 (중요):** 다운로드 대기열, 진행 상태, 완료 내역을 확인할 수 있는 최소한의 네이티브 UI 제공.
  * **P2 (보통):** 사용자가 기본 다운로드 경로, 선호 화질 및 포맷(영상/오디오)을 설정할 수 있는 기능 제공.
  * **P2 (보통):** 다운로드 완료 및 실패 시 macOS 사용자 알림 센터를 통해 피드백 제공.

**5. 기능 명세 (Features & User Stories)**

| 기능 ID | 기능명 | 사용자 스토리 (User Story) | 주요 사양 및 요구사항 | 우선순위 |
| :--- | :--- | :--- | :--- | :--- |
| **F-01** | **스팟라이트 연동 다운로드** | 사용자는 유튜브 URL을 복사한 뒤 스팟라이트를 열어 붙여넣고, "영상 다운로드" 액션을 선택하여 즉시 다운로드를 시작하고 싶다. | - macOS의 Spotlight File Provider Extension을 활용.<br>- 클립보드의 URL이 유효한 유튜브 주소일 경우, 관련 액션을 스팟라이트 결과에 노출.<br>- 액션 선택 시, URL을 메인 앱의 백그라운드 프로세스로 전달하여 다운로드 큐에 추가. | **P0** |
| **F-02** | **핵심 다운로드 엔진** | 사용자는 `yt-dlp`와 `ffmpeg`를 통해 최고 화질의 영상은 물론, 오디오만 추출하는 등 원하는 형태로 파일을 안정적으로 받고 싶다. | - `yt-dlp`, `ffmpeg` 실행 파일을 앱 패키지 내에 번들링.<br>- Swift 코드 내에서 `Process`를 사용하여 커맨드라인 도구를 제어.<br>- URL, 포맷 코드, 출력 경로 등 필요한 인자를 동적으로 전달.<br>- 도구의 표준 출력(stdout)을 파싱하여 다운로드 진행률(%)을 UI에 표시. | **P0** |
| **F-03** | **메인 앱 UI** | 사용자는 현재 어떤 파일이 다운로드되고 있는지, 그리고 완료된 내역은 무엇인지 한눈에 보고 싶다. | - **대기열:** 현재 다운로드 중인 항목의 썸네일, 제목, 진행률 바, 취소 버튼 표시.<br>- **완료 내역:** 다운로드 완료된 항목 리스트. 'Finder에서 보기', '목록에서 삭제' 기능 제공.<br>- SwiftUI를 사용하여 현대적이고 반응성이 뛰어난 UI로 구현. | **P1** |
| **F-04** | **다운로드 옵션 설정** | 사용자는 매번 화질을 묻지 않도록, 선호하는 기본 다운로드 옵션(예: 최고화질 MP4, 오디오만 M4A)을 미리 설정하고 싶다. | - **설정 화면:**<br>  1. 기본 저장 위치 지정 (예: `~/Downloads/SpotlightDownloader`)<br>  2. 기본 포맷 선택 (최고화질 영상, 1080p 영상, 오디오만 등)<br>  3. "다운로드 시 항상 묻기" 옵션 제공. | **P2** |
| **F-05** | **상세 포맷 선택** | 사용자는 특정 영상에 한해, 다운로드 직전에 원하는 해상도나 포맷을 직접 선택하고 싶다. | - "항상 묻기" 옵션 활성화 시, 또는 특정 액션을 통해 트리거.<br>- `yt-dlp --list-formats` 명령으로 해당 URL에서 사용 가능한 모든 포맷/해상도 목록을 가져옴.<br>- 사용자에게 선택지를 담은 간단한 모달(Modal) 창을 표시. | **P2** |
| **F-06** | **상태 알림** | 사용자는 다운로드가 완료되거나 실패했을 때, 앱을 보고 있지 않아도 그 결과를 알고 싶다. | - macOS User Notifications 프레임워크 사용.<br>- 성공: "다운로드 완료" 알림. 클릭 시 Finder에서 해당 파일 표시.<br>- 실패: "다운로드 실패" 알림. 간단한 실패 사유 포함 (예: "저작권으로 보호된 영상"). | **P2** |

**6. 기술 스택 (Tech Stack)**

  * **언어:** Swift 5.x
  * **UI 프레임워크:** SwiftUI
  * **핵심 의존성:** `yt-dlp`, `ffmpeg` (Command-Line Executables)
  * **macOS 연동:** Spotlight Indexing, File Provider Extension, User Notifications

**7. 리스크 및 완화 전략 (Risks & Mitigation)**

  * **리스크 1: 유튜브의 구조 변경으로 인한 `yt-dlp` 작동 오류**
      * **완화 전략:**
        1.  앱 내에서 주기적으로 `yt-dlp`의 최신 버전을 확인하는 로직 추가.
        2.  업데이트가 있을 경우, 사용자에게 알리고 내장된 `yt-dlp` 실행 파일을 교체할 수 있는 자동/수동 업데이트 기능 제공.
  * **리스크 2: 애플 앱스토어 정책 위반 가능성**
      * **완화 전략:**
        1.  Mac App Store가 아닌, 개발자 웹사이트를 통한 직접 배포(Direct Distribution)를 우선으로 고려.
        2.  Gumroad, Paddle 등의 결제 솔루션을 사용하여 유료 버전 판매 채널 확보.
  * **리스크 3: 저작권 및 유튜브 서비스 약관(ToS) 관련 문제**
      * **완화 전략:**
        1.  앱 내에 "본 앱은 기술적인 도구이며, 다운로드하는 콘텐츠에 대한 책임은 전적으로 사용자에게 있습니다"라는 내용의 면책 조항 명시.
        2.  저작권 보호(DRM)가 적용된 콘텐츠는 다운로드할 수 없음을 명확히 안내.
